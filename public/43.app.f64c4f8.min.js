/*! build: Fri Jan 26 2018 11:31:30 GMT+0800 (中国标准时间) */
webpackJsonp([43],{1362:function(e,t){},1366:function(e,t,a){e.exports=a.p+"imgs/page-login-logo.png"},888:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){var t=e.auth;return t?{user:t.user,loginError:t.loginError}:{user:null}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(2),c=function(e){return e&&e.__esModule?e:{default:e}}(s),u=a(402),f=a(401),m=a(179),p=a(4),d=a(403);a(1366),a(1362);var h=function(e){function t(e){n(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={visible:!1,isDisabled:!1,logging:!1},a.handleLogin=a.handleLogin.bind(a),a.closeNotification=a.closeNotification.bind(a),a}return l(t,e),i(t,[{key:"componentDidMount",value:function(){var e=(0,d.getViewportHeight)(),t=this.props,a=t.dispatch;t.params,document.querySelector(".hm-login-header").style.height=.45*e+"px",document.querySelector(".hm-login-form").style.height=.35*e+"px",this.sendLoginRequest=function(e){var t=e.username,n=e.password;return a((0,m.loginRequest)({username:t,password:n}))},this.cancel=function(){return a((0,m.loginCancel)())}}},{key:"componentWillReceiveProps",value:function(e){if(e.user)try{var t=this.props.location.query.redirect;this.context.router.replace(t)}catch(e){var a=(0,p.loadIdToken)(),n=a.position;"2"===n?this.context.router.replace("/supervisor"):this.context.router.replace("/home")}!e.user&&e.loginError&&this.setState({visible:!0,isDisabled:!1,logging:!1})}},{key:"handleLogin",value:function(e){return e.preventDefault(),this.setState({isDisabled:!0,logging:!0}),this.sendLoginRequest({username:this.accountRef.value,password:this.passwordRef.value}),!1}},{key:"closeNotification",value:function(e){this.setState({visible:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.user,t.loginError);return c.default.createElement("div",{className:"hm-login-container"},c.default.createElement("header",{className:"hm-login-header"},c.default.createElement("img",{src:"../imgs/login/page-login-logo.png",alt:""}),c.default.createElement("p",{className:"system-name"},"禾苗·导购助手")),c.default.createElement("form",{action:"post",className:"hm-login-form",onSubmit:this.handleLogin},c.default.createElement("div",{className:"field-group hm-login-form-text"},c.default.createElement("span",{className:"field-group-label"},c.default.createElement("span",{className:"iconfont icon-yonghu"})),c.default.createElement("input",{type:"text",name:"account",ref:function(t){e.accountRef=t},placeholder:"请输入用户名",className:"field"})),c.default.createElement("div",{className:"field-group hm-login-form-text"},c.default.createElement("span",{className:"field-group-label"},c.default.createElement("span",{className:"iconfont icon-ziyuan"})),c.default.createElement("input",{type:"password",name:"password",ref:function(t){e.passwordRef=t},placeholder:"请输入密码",className:"field"})),c.default.createElement(f.Button,{amSize:"xl",amStyle:"warning",type:"submit",disabled:this.state.isDisabled,hollow:!0},"登     录",c.default.createElement(f.Loader,{className:this.state.logging?"":"hide",amStyle:"warning",rounded:!0}))),c.default.createElement(f.Notification,{title:"登录错误!",amStyle:"alert",visible:this.state.visible,animated:!0,onDismiss:this.closeNotification},a&&a.message,"."),c.default.createElement("ul",{className:"hm-top-circle"},c.default.createElement("li",{className:"first"}),c.default.createElement("li",{className:"second"}),c.default.createElement("li",{className:"third"}),c.default.createElement("li",{className:"fourth"}),c.default.createElement("li",{className:"fifth"}),c.default.createElement("li",{className:"sixth"}),c.default.createElement("li",{className:"seventh"}),c.default.createElement("li",{className:"eighth"}),c.default.createElement("li",{className:"ninth"}),c.default.createElement("li",{className:"tenth"})))}}]),t}(s.Component);h.contextTypes={router:s.PropTypes.object.isRequired,store:s.PropTypes.object.isRequired},h.propTypes={user:s.PropTypes.object,loginError:s.PropTypes.object,dispatch:s.PropTypes.func.isRequired,location:s.PropTypes.object},t.default=(0,u.connect)(r)(h)}});