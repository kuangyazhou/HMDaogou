/*! build: Fri Jan 26 2018 11:31:30 GMT+0800 (中国标准时间) */
webpackJsonp([25],{1071:function(e,t,a){var l,n,r;!function(s,o){n=[t,a(2),a(69)],l=o,void 0!==(r="function"==typeof l?l.apply(t,n):l)&&(e.exports=r)}(0,function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e){return"function"==typeof e.children?e.children():e.children||null}function r(e){return n(e)}function s(e){return n(e)}function o(e){var t=e.children;return null==t?null:[].concat(t).find(function(t){return t.type!==s^!e.condition})||null}Object.defineProperty(e,"__esModule",{value:!0}),e.Then=r,e.Else=s,e.If=o;var c=(l(t),l(a));r.propTypes=s.propTypes={children:c.default.oneOfType([c.default.func,c.default.string,c.default.number,c.default.object])};var i=c.default.oneOfType([c.default.object,c.default.instanceOf(r),c.default.instanceOf(s)]);o.propTypes={condition:c.default.bool.isRequired,children:c.default.oneOfType([c.default.arrayOf(i),i])},o.Then=r,o.Else=s,e.default=o})},1073:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),c=a(2),i=l(c),d=a(12),m=l(d),u=a(401);a(1355);var h=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleClick=a.handleClick.bind(a),a.handleSwitch=a.handleSwitch.bind(a),a}return s(t,e),o(t,[{key:"handleClick",value:function(){this.props.showBrandSearch?this.props.showBrandSearch():this.props.showSingleBrandSearch&&this.props.showSingleBrandSearch()}},{key:"handleSwitch",value:function(){this.props.switchChart()}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.handleMore,l=e.children,n=e.iconName,r=(e.bgColor,e.isMoreHide),s=e.isManager,o=(e.handleClick,e.cardLinkId),c=e.specialHeader,d=e.switchContent,h=(0,m.default)("iconfont",n,"hm-stack-1x","hm-color-white"),f=s?"hm-circle hm-stack-2x hm-master":"hm-circle hm-stack-2x hm-user";return i.default.createElement("div",{className:"hm-card-container"},i.default.createElement(u.Card.Child,{className:"hm-card-header"},i.default.createElement("div",{className:"hm-card-header-label"},i.default.createElement("span",{className:"hm-stack"},i.default.createElement("i",{className:f}),i.default.createElement("i",{className:h})),i.default.createElement("span",{className:"hm-card-title"},t)),r?"":i.default.createElement("div",{className:"hm-card-header-more"},d?i.default.createElement("button",{className:"switch-button",onClick:this.handleSwitch},d):i.default.createElement("a",{id:o,href:a,onClick:this.handleClick},i.default.createElement("span",{className:"special-header"},c),i.default.createElement(u.Icon,{name:"right-nav"})))),i.default.createElement("div",{className:"hm-card-body"},l))}}]),t}(i.default.Component);t.default=h,h.propTypes={title:c.PropTypes.string.isRequired,handleMore:c.PropTypes.string,tips:c.PropTypes.object,bgColor:c.PropTypes.any,iconName:c.PropTypes.string.isRequired,isMoreHide:c.PropTypes.any,handleClick:c.PropTypes.func,isManager:c.PropTypes.string,cardLinkId:c.PropTypes.string,specialHeader:c.PropTypes.string,showBrandSearch:c.PropTypes.func,showSingleBrandSearch:c.PropTypes.func,switchChart:c.PropTypes.func,switchContent:c.PropTypes.string}},1355:function(e,t){},1357:function(e,t){},887:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){var t=e.user,a=e.auth;return t?{user:t,auth:a}:{auth:{user:{name:""}},user:{storeAllNoteList:[],storeAllNotePager:{}}}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),i=a(2),d=l(i),m=a(402),u=a(404),h=a(1071),f=a(1),p=l(f),y=a(401),g=a(4),E=a(179),N=a(422),v=a(436),b=a(434),T=(a(408),a(412)),k=a(433),S=a(435),w=a(419),_=a(1073),C=l(_);a(1357);var M=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isErrorHappend:!1,isModalOpen:!1,isNoticeOpen:!1,isActivityOpen:!1,isSucceed:!1,isAlertOpen:!1,isShowModal:!1,isNoticeModalOpen:!1,isShowTodaySale:!1,isShowMonthSale:!1,isShowVerse:!1,selectedAlert:{title:"",content:"",createDate:""},activityAlert:{title:"",content:"",createDate:""}},a.closeNotification=a.closeNotification.bind(a),a.handlePopupQCode=a.handlePopupQCode.bind(a),a.closeQCodeModal=a.closeQCodeModal.bind(a),a.handleItemClick=a.handleItemClick.bind(a),a.onClose=a.onClose.bind(a),a.handleEntryClick=a.handleEntryClick.bind(a),a.handleLogout=a.handleLogout.bind(a),a.logout=a.logout.bind(a),a.closeModal=a.closeModal.bind(a),a.handleEXchange=a.handleEXchange.bind(a),a.noticeModal=a.noticeModal.bind(a),a.toSearch=a.toSearch.bind(a),a.handleToOtherPage=a.handleToOtherPage.bind(a),a.handleShowTodaySale=a.handleShowTodaySale.bind(a),a.handleShowMonthSale=a.handleShowMonthSale.bind(a),a.handleCloseVerse=a.handleCloseVerse.bind(a),a}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch;e.params,e.auth,(0,g.getToken)(),t((0,N.getAllStoreNotes)()),t((0,b.getMonthSale)()),t((0,k.fetchCurrentDayTarget)()),t((0,T.getIndexActivity)()),t((0,S.fetchNotice)()),t((0,w.fetchCustomerDayTaskType)()),setTimeout(function(){new XMLHttpRequest,t((0,v.getQCodeImgUrl)())},200);for(var a=document.querySelectorAll("[data-tab-name]"),l=0;l<a.length;l++)"today"!==a[l].getAttribute("data-tab-name")&&a[l].addEventListener("click",this.handleToOtherPage)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.user,a=t.isNoticeGet;t.noticeList.store.notice,e.user.error&&this.setState({isErrorHappend:!0}),(0,g.getLoginTime)()||((0,E.checkLogin)(),(0,g.setLoginTime)(0)),!(0,g.getIsToday)()&&a&&(this.setState({isNoticeModalOpen:!0,isShowVerse:!0}),(0,g.setIsToday)((0,p.default)().format("YYYY-MM-DD")))}},{key:"componentWillUnmount",value:function(){for(var e=document.querySelectorAll("[data-tab-name]"),t=0;t<e.length;t++)"today"!==e[t].getAttribute("data-tab-name")&&e[t].removeEventListener("click",this.handleToOtherPage)}},{key:"onClose",value:function(){this.setState({isNoticeOpen:!1,isActivityOpen:!1,isNoticeModalOpen:!1})}},{key:"handleShowTodaySale",value:function(e){e.preventDefault(),this.setState({isShowTodaySale:!this.state.isShowTodaySale})}},{key:"handleShowMonthSale",value:function(e){e.preventDefault(),this.setState({isShowMonthSale:!this.state.isShowMonthSale})}},{key:"handleItemClick",value:function(e){this.setState({selectedAlert:e,isNoticeOpen:!0})}},{key:"handleToOtherPage",value:function(e){this.setState({isShowModal:!0})}},{key:"handleCloseVerse",value:function(){this.setState({isShowVerse:!1})}},{key:"logout",value:function(e){this.context.router,this.setState({isAlertOpen:!1}),e&&((0,g.removeIdToken)(),(0,g.removeLoginTime)(),localStorage.removeItem("user_time_out"),window.location.reload(!0))}},{key:"handleLogout",value:function(e){e.preventDefault(),this.setState({isAlertOpen:!0})}},{key:"handleEXchange",value:function(e){e.preventDefault(),this.props.history.push("/managerHome"),sessionStorage.setItem("userType","店长")}},{key:"toSearch",value:function(){this.props.history,this.setState({isShowModal:!0})}},{key:"createModal",value:function(e){var t=this;return d.default.createElement(y.Modal,{role:"alert",title:"门店通知",ref:function(e){return t.modal=e},isOpen:this.state.isNoticeOpen,closeViaBackdrop:!0,id:"hm_home_store_notification_modal",onDismiss:this.onClose},d.default.createElement(y.Grid,{collapse:!0,align:"between",className:"hm-alert-grid"},d.default.createElement(y.Col,{cols:2,className:"hm-alert-label"},"通知标题: "),d.default.createElement(y.Col,{cols:4,className:"hm-alert-content"},e.title)),d.default.createElement(y.Grid,{collapse:!0,align:"between",className:"hm-alert-grid"},d.default.createElement(y.Col,{cols:2,className:"hm-alert-label"},"通知: "),d.default.createElement(y.Col,{cols:4,className:"hm-alert-content"},e.content)),d.default.createElement(y.Grid,{collapse:!0,align:"between",className:"hm-alert-grid"},d.default.createElement(y.Col,{cols:2,className:"hm-alert-label"},"发布日期: "),d.default.createElement(y.Col,{cols:4,className:"hm-alert-content"},(0,p.default)(e.createDate).format("YYYY年MM月DD号"))))}},{key:"handleEntryClick",value:function(e){this.setState({activityAlert:e,isActivityOpen:!0})}},{key:"activityModal",value:function(e){var t=this;return d.default.createElement(y.Modal,{role:"alert",title:"促销活动",ref:function(e){return t.modal=e},isOpen:this.state.isActivityOpen,onDismiss:this.onClose,id:"hm_home_activity_modal",className:"hm_home_activity_modal",closeViaBackdrop:!0},d.default.createElement(y.Grid,{collapse:!0,align:"between",className:"hm-alert-grid"},d.default.createElement(y.Col,{cols:2,className:"hm-alert-label"},"活动标题: "),d.default.createElement(y.Col,{cols:4,className:"hm-alert-content"},decodeURIComponent(e.actName).replace(/\+/g," "))),d.default.createElement(y.Grid,{collapse:!0,align:"between",className:"hm-alert-grid"},d.default.createElement(y.Col,{cols:2,className:"hm-alert-label"},"活动日期: "),d.default.createElement(y.Col,{cols:4,className:"hm-alert-content"},e.startDateAsString+" 至 "+e.endDateAsString)),d.default.createElement(y.Grid,{collapse:!0,align:"between",className:"hm-alert-grid"},d.default.createElement(y.Col,{cols:2,className:"hm-alert-label"},decodeURIComponent(e.actDesc).replace(/\+/g," ")&&"活动:"),d.default.createElement(y.Col,{cols:4,className:"hm-alert-content"},d.default.createElement("span",null,decodeURIComponent(e.actDesc).replace(/\+/g," ")))))}},{key:"handlePopupQCode",value:function(e){e.preventDefault(),this.setState({isModalOpen:!0})}},{key:"closeQCodeModal",value:function(e){this.setState({isModalOpen:!1})}},{key:"closeNotification",value:function(e){e.preventDefault(),this.setState({isErrorHappend:!1})}},{key:"handleMore",value:function(e){e.preventDefault()}},{key:"closeModal",value:function(){this.setState({isAlertOpen:!1})}},{key:"noticeModal",value:function(e){var t=this,a=decodeURIComponent(e.store.notice).replace(/\+/gi," ");return this.notice&&(this.notice.innerHTML=a),d.default.createElement(y.Modal,{role:"alert",title:"公告",isOpen:this.state.isNoticeModalOpen,closeViaBackdrop:!0,id:"hm_home_notice_modal",onDismiss:this.onClose},d.default.createElement("div",{className:"hm-notice",ref:function(e){return t.notice=e}}))}},{key:"renderTodayTarget",value:function(e){var t=(100*e).toFixed();return d.default.createElement("span",{className:"hm-today-tips"},"完成进度: ",d.default.createElement("span",{className:"text-red"},t,"%"))}},{key:"renderLogoutAlert",value:function(){return d.default.createElement(y.Modal,{className:"hm-modal-logout",title:"温馨提示",role:"confirm",closeViaBackdrop:!0,id:"hm_home_logout_modal",onAction:this.logout,isOpen:this.state.isAlertOpen,onDismiss:this.closeModal},d.default.createElement("p",null,"是否退出登录？"))}},{key:"renderTimeLine",value:function(e){var t=this.props.user,a=parseInt(t.currentDayTarget.currentDayTaskBeginTime,0),l=e||0,n=[];if(l)for(var r=1;l>=r;r++){var s="workHours-"+r;a>0&&a===r?n.push(d.default.createElement("li",{key:s},d.default.createElement("i",{className:"active"}),d.default.createElement("span",null,r))):a>0&&a>r?n.push(d.default.createElement("li",{key:s,className:"active"},d.default.createElement("i",{className:"active"}),d.default.createElement("span",null,r))):n.push(d.default.createElement("li",{key:s},d.default.createElement("i",null),d.default.createElement("span",null,r)))}return n}},{key:"renderDateAndIcon",value:function(e){return d.default.createElement("div",null,d.default.createElement("span",null,e.startDateAsString+" 至 "+e.endDateAsString),d.default.createElement("span",null,0===e.isOffline?d.default.createElement("span",{style:{color:"#ff474c"}},"线上活动"):d.default.createElement("span",null,"线下活动")))}},{key:"render",value:function(){var e=this,t=this.props,a=t.auth,l=t.user;l.myTasks.undo,(0,g.getToken)();a.user||(a.user=(0,g.loadUserProfile)());var n=l.currentDayTarget.pageItems,r=(g.RESTFUL_SERVER,this.createModal(this.state.selectedAlert)),s=this.activityModal(this.state.activityAlert),o=this.noticeModal(l.noticeList),c=((100*l.currentMonthSalePercent).toFixed(),(100*l.currentDayTarget.dayPercent).toFixed()),i=l.currentDayTarget.dayComplete,m=l.currentDayTarget.dayPoints,f=void(l.groupTasks.tasks.length>0&&l.groupTasks.tasks[0].groupName&&l.groupTasks.tasks[l.groupTasks.tasks.length-1].groupName);return f=l.indexActives.isIndexActivityGet?l.indexActives.actives.length>0?l.indexActives.actives.map(function(t,a){var l="single-active-"+a;return a<=15?d.default.createElement(y.List.Item,{key:l,title:decodeURIComponent(t.actName).replace(/\+/g," "),subTitle:e.renderDateAndIcon(t),onClick:function(){return e.handleEntryClick(t)},id:"hm_home_activity_item_"+a}):""}):d.default.createElement("li",{className:"hm-null"},d.default.createElement("i",{className:"iconfont icon-meiyouxiaoxi"}),"还没有活动"):d.default.createElement("li",{className:"hm-loading-wrapper"},d.default.createElement("i",{className:"iconfont icon-jiazai hm-pulse hm-loading"})),d.default.createElement(y.View,null,r,s,o,this.renderLogoutAlert(this.state.isAlertOpen),d.default.createElement(y.Container,{scrollable:!0,className:"ks-grid"},d.default.createElement(y.Notification,{title:"请稍后再来!",amStyle:"alert",visible:this.state.isErrorHappend,animated:!0,onDismiss:this.closeNotification},"服务器正在卖力处理中"),d.default.createElement(y.Modal,{role:"alert",className:"hm-qrCodeModal",title:"二维码",id:"hm_home_qCode_modal",isOpen:this.state.isModalOpen,onDismiss:this.closeQCodeModal,closeViaBackdrop:!0},d.default.createElement("img",{alt:"二维码",src:l.qCodeUrl})),d.default.createElement("header",{className:"hm-home-header-wrapper"},d.default.createElement("div",{className:"hm-home-header"},d.default.createElement("a",{href:"#/alerts",className:"hm-notice-btn",id:"hm_home_search_customer_link"},d.default.createElement("div",{className:"btn-wrapper"},d.default.createElement("i",{className:"iconfont icon-tongzhi"}),d.default.createElement("span",null,"通知"),l.storeAllNoteList&&l.storeAllNoteList.length>0&&d.default.createElement("div",{className:"hm-badge"},l.storeAllNoteList.length))),d.default.createElement("a",{className:"hm-search",href:"#/customer/list",onClick:this.toSearch,id:"hm_home_search_customer_link"},d.default.createElement("div",{className:"ipt"},"搜索客户"),d.default.createElement("span",{className:"icon icon-search"})),d.default.createElement("a",{id:"hm_home_qrcode_button",className:"hm-qrcode-btn",onClick:this.handlePopupQCode},d.default.createElement("div",{className:"btn-wrapper"},d.default.createElement("i",{className:"iconfont icon-erweima","aria-hidden":"true"}),d.default.createElement("span",{className:"text"},"二维码"))),a.user&&"0"!==a.user.position?d.default.createElement("a",{id:"hm_home_exchange_button",onClick:this.handleEXchange},d.default.createElement("div",{className:"btn-wrapper"},d.default.createElement("i",{className:"iconfont icon-qiehuan","aria-hidden":"true"}),d.default.createElement("span",{className:"text"},"切换"))):""),this.state.isShowModal&&d.default.createElement("div",{className:"loading-modal"},d.default.createElement("i",{className:"iconfont icon-jiazai hm-pulse hm-loading"}))),d.default.createElement("div",{className:"hm-home-container"},d.default.createElement("div",{className:"hm-home-section-todaytarget"},d.default.createElement(C.default,{title:"我的目标",iconName:"icon-target",handleMore:"#/todayTarget",cardLinkId:"hm_home_today_target_more_link",isMoreHide:!0},l.currentDayTarget.dayPercent?d.default.createElement("div",{className:"hm-my-target-wrapper"},d.default.createElement("ul",{className:"progress-container"},this.renderTimeLine(l.currentDayTarget.currentDayWorkTime)),l.currentDayTarget.dayPercent&&d.default.createElement("div",{className:"today-sale-money"},d.default.createElement("a",{href:"#/todayTarget/day",onClick:this.handleShowTodaySale},d.default.createElement("div",{className:"sale-wrapper"},d.default.createElement("span",{className:"today-sale"},"今日销售：",d.default.createElement("b",{className:"now-complete"},Number(i).toLocaleString())),d.default.createElement("div",{className:"progress"},d.default.createElement("span",{style:{width:c+"%"}},d.default.createElement("b",null,c+"%")))),d.default.createElement("div",{className:"describe"},d.default.createElement("span",{className:"shoul-complete"},"应该完成：",isNaN(l.currentDayTarget.goalsAchieved)?0:Number(l.currentDayTarget.goalsAchieved).toLocaleString()),d.default.createElement("span",{className:"today-target"},"今日目标：",Number(m).toLocaleString()),d.default.createElement("span",{className:this.state.isShowTodaySale?"icon icon-right-nav rotate":"icon icon-right-nav"}))),this.state.isShowTodaySale&&d.default.createElement("div",{className:"today-sale-money-item"},d.default.createElement("div",{className:"tips"},d.default.createElement("span",{className:"price-target"},d.default.createElement("i",null),"金额目标"),d.default.createElement("span",{className:"piece-target"},d.default.createElement("i",null),"计件目标")),d.default.createElement("div",{className:"outside-container"},d.default.createElement("dl",{className:"all-progress"},l.currentDayTarget&&l.currentDayTarget.pageItems&&l.currentDayTarget.pageItems.length>0&&l.currentDayTarget.pageItems.map(function(e,t,a){var n="child-target-"+t,r=void 0;switch(l.currentDayTarget.showType){case"series":r="series";break;case"brand":r="brand";break;case"cat":r="cat";break;case"goods":r="goods";break;case"composition":r="composition"}var s=[];a.forEach(function(e,t){s.push(e.catValue)});var o=(0,u.indexOf)(s,e.catValue),c=(0,u.lastIndexOf)(s,e.catValue),i=void 0,m=void 0;return o!==c&&(i=parseInt(o,10),m=parseInt(c,10)),a.length>0&&void 0!==i&&void 0!==m&&a[t].catValue===a[i].catValue&&a[t]!==a[m]?d.default.createElement("dd",{key:n,className:"statistics"},d.default.createElement("a",{href:"#/customer/list/"+r+"/"+e.catValue,id:"hm_home_statistics_price_"+t},d.default.createElement("div",{className:"统计数量"===a[m].targetType?"piece progress":"price progress"},d.default.createElement("span",{style:{width:100*a[m].dayPercent+"%"}},d.default.createElement("b",null,Number(a[m].dayComplete).toLocaleString(),"/",Number(a[m].dayPoints).toLocaleString()))),d.default.createElement("div",{className:"统计数量"===a[i].targetType?"piece progress":"price progress"},d.default.createElement("span",{style:{width:100*a[i].dayPercent+"%"}},d.default.createElement("b",null,Number(a[i].dayComplete).toLocaleString(),"/",Number(a[i].dayPoints).toLocaleString()))),d.default.createElement("span",{className:"cat-name"},e.catName))):a[t]!==a[m]?d.default.createElement("dd",{key:n,className:"统计数量"===e.targetType?"total-piece":"total-price"},d.default.createElement(h.If,{condition:"统计数量"===e.targetType},d.default.createElement("a",{href:"#/customer/list/"+r+"/"+e.catValue,id:"hm_home_statistics_count_"+t},d.default.createElement("div",{className:"progress"},d.default.createElement("span",{style:{width:100*e.dayPercent+"%"}},d.default.createElement("b",null,Number(e.dayComplete).toLocaleString(),"/",Number(e.dayPoints).toLocaleString()))),d.default.createElement("span",{className:"cat-name"},e.catName))),d.default.createElement(h.If,{condition:"统计数量"!==e.targetType},d.default.createElement("a",{href:"#/customer/list/"+r+"/"+e.catValue,id:"hm_home_statistics_count_"+t},d.default.createElement("div",{className:"progress"},d.default.createElement("span",{style:{width:100*e.dayPercent+"%"}},d.default.createElement("b",null,Number(e.dayComplete).toLocaleString(),"/",Number(e.dayPoints).toLocaleString()))),d.default.createElement("span",{className:"cat-name"},e.catName)))):""}))))),l.currentDayTarget.monthPercent&&d.default.createElement("div",{className:"month-sale-money"},d.default.createElement("a",{href:"#/todayTarget/month",onClick:this.handleShowMonthSale},d.default.createElement("div",{className:"sale-wrapper"},d.default.createElement("span",{className:"today-sale"},"本月销售：",d.default.createElement("b",{className:"now-complete"},Number(l.currentDayTarget.monthComplete).toLocaleString())),d.default.createElement("div",{className:"progress"},d.default.createElement("span",{style:{width:Math.round(100*Number(l.currentDayTarget.monthPercent))+"%"}},d.default.createElement("b",null,Math.round(100*Number(l.currentDayTarget.monthPercent))+"%")))),d.default.createElement("div",{className:"describe"},d.default.createElement("span",{className:"shoul-complete"},"应该完成：",isNaN(l.currentDayTarget.monthShouldCompleted)?0:Number(l.currentDayTarget.monthShouldCompleted).toLocaleString()),d.default.createElement("span",{className:"today-target"},"本月目标：",Number(l.currentDayTarget.monthPoints).toLocaleString()),d.default.createElement("span",{className:this.state.isShowTodaySale?"icon icon-right-nav rotate":"icon icon-right-nav"}))),this.state.isShowMonthSale&&d.default.createElement("div",{className:"today-sale-money-item"},d.default.createElement("div",{className:"tips"},d.default.createElement("span",{className:"price-target month"},d.default.createElement("i",null),"金额目标"),d.default.createElement("span",{className:"piece-target month"},d.default.createElement("i",null),"计件目标")),d.default.createElement("dl",{className:"all-progress"},l.currentDayTarget&&n&&n.length>0&&n.map(function(e,t,a){var n="child-target-"+t,r=void 0;switch(l.currentDayTarget.showType){case"series":r="series";break;case"brand":r="brand";break;case"cat":r="cat";break;case"goods":r="goods";break;case"composition":r="composition"}var s=e.monthPercent.indexOf("%"),o=e.monthPercent.slice(0,s),c=[];a.forEach(function(e,t){c.push(e.catValue)});var i=(0,u.indexOf)(c,e.catValue),m=(0,u.lastIndexOf)(c,e.catValue),f=void 0,p=void 0;return i!==m&&(f=parseInt(i,10),p=parseInt(m,10)),a.length>0&&void 0!==f&&void 0!==p&&a[t].catValue===a[f].catValue&&a[t]!==a[p]?d.default.createElement("dd",{key:n,className:"statistics month"},d.default.createElement("a",{href:"#/customer/list/"+r+"/"+e.catValue,id:"hm_month_target_price_link_"+t},d.default.createElement("div",{className:"统计数量"===a[p].targetType?"piece progress":"price progress"},d.default.createElement("span",{style:{width:a[p].monthPercent}},d.default.createElement("b",null,Number(a[p].monthComplete).toLocaleString(),"/",Number(a[p].monthPoints).toLocaleString()))),d.default.createElement("div",{className:"统计数量"===a[f].targetType?"piece progress":"price progress"},d.default.createElement("span",{style:{width:a[f].monthPercent}},d.default.createElement("b",null,Number(a[f].monthComplete).toLocaleString(),"/",Number(a[f].monthPoints).toLocaleString()))),d.default.createElement("span",{className:"cat-name"},e.catName))):a[t]!==a[p]?d.default.createElement("dd",{key:n,className:"统计数量"===e.targetType?"total-piece month":"total-price month"},d.default.createElement(h.If,{condition:"统计数量"===e.targetType},d.default.createElement("a",{href:"#/customer/list/"+r+"/"+e.catValue,id:"hm_month_target_count_link_"+t},d.default.createElement("div",{className:"progress"},d.default.createElement("span",{style:{width:o+"%"}},d.default.createElement("b",null,Number(e.monthComplete).toLocaleString(),"/",Number(e.monthPoints).toLocaleString()))),d.default.createElement("span",{className:"cat-name"},e.catName))),d.default.createElement(h.If,{condition:"统计数量"!==e.targetType},d.default.createElement("a",{href:"#/customer/list/"+r+"/"+e.catValue,id:"hm_home_statistics_count_"+t},d.default.createElement("div",{className:"progress"},d.default.createElement("span",{style:{width:o+"%"}},d.default.createElement("b",null,Number(e.monthComplete).toLocaleString(),"/",Number(e.monthPoints).toLocaleString()))),d.default.createElement("span",{className:"cat-name"},e.catName)))):""})))),l.currentDayTarget.newmember&&d.default.createElement("div",{className:"month-new-customer"},d.default.createElement("a",{href:"#/customer/list/newCustomer/RegTimeDesc"},d.default.createElement("div",{className:"sale-wrapper"},d.default.createElement("span",{className:"today-sale"},"本月新客：",d.default.createElement("b",{className:"now-complete"},""+Number(l.currentDayTarget.newmember.monthComplete))),d.default.createElement("div",{className:"progress"},d.default.createElement("span",{style:{width:Math.round(100*Number(l.currentDayTarget.newmember.monthPercent))+"%"}},d.default.createElement("b",null,Math.round(100*Number(l.currentDayTarget.newmember.monthPercent)),"%")))),d.default.createElement("div",{className:"describe"},d.default.createElement("span",{className:"shoul-complete"}),d.default.createElement("span",{className:"today-target"},"本月目标：",Number(l.currentDayTarget.newmember.monthPoints)),d.default.createElement("span",{className:"icon icon-right-nav"}))))):d.default.createElement("div",{className:"hm-loading-wrapper"},d.default.createElement("i",{className:"iconfont icon-jiazai hm-pulse hm-loading"})))),d.default.createElement("div",{className:"hm-home-sale-changce"},d.default.createElement(C.default,{title:"销售机会",iconName:"icon-business_line",handleMore:"#/customer/relations"},d.default.createElement("div",{className:"hm-sale-changce-link"},l.dayTaskType&&l.dayTaskType.length>1?l.dayTaskType.map(function(e,t){var a="key-"+t,l=void 0,n=void 0,r="#/customer/list/task/"+e.type;switch(e.type){case"01":l="new-customer",n="iconfont icon-xinzengkehu";break;case"02":l="stage-sale-customer",n="iconfont icon-yingxiao";break;case"03":l="churn-prewarning",n="iconfont icon-yujing";break;case"04":l="repeat-buy-customer",n="iconfont icon-tuijian";break;case"05":l="care-for-growth",n="iconfont icon-tubiao05",r="#/careOfGrowth"}return d.default.createElement("a",{href:r,className:l,id:"hm_home_changce_link_"+t,key:a},d.default.createElement("div",{className:"icon-wrapper"},d.default.createElement("i",{className:n}),e.contentValue&&"0"!==e.contentValue?d.default.createElement("div",{className:"hm-badge"},e.contentValue):""),d.default.createElement("span",null,e.ruleName))}):d.default.createElement("div",{className:"hm-loading-wrapper"},d.default.createElement("i",{className:"iconfont icon-jiazai hm-pulse hm-loading"}))))),d.default.createElement("div",{className:"hm-home-section-actives"},d.default.createElement(y.Grid,null,d.default.createElement(y.Col,{cols:6},d.default.createElement(C.default,{title:"促销活动",iconName:"icon-huodong",handleMore:"#/calendarActivity",cardLinkId:"hm_home_activity_more_link"},d.default.createElement(y.List,{className:"hm-active-list"},f))))),this.state.isShowVerse&&d.default.createElement("div",{className:"verse",onClick:this.handleCloseVerse},d.default.createElement("div",{className:"verse-wrapper"},d.default.createElement("i",{className:"iconfont icon-xiaolian"}),d.default.createElement("span",null,"敢坚持努力下去吗？目标就在你眼前啦~")),d.default.createElement("div",{className:"close-btn"},d.default.createElement("span",{className:"icon icon-close"}))))))}}]),t}(d.default.Component);M.propTypes={dispatch:i.PropTypes.func.isRequired,user:i.PropTypes.object.isRequired,auth:i.PropTypes.object.isRequired,history:i.PropTypes.object.isRequired},t.default=(0,m.connect)(o)(M)}});