/*! build: Fri Jan 26 2018 11:31:30 GMT+0800 (中国标准时间) */
webpackJsonp([15],{1071:function(e,t,a){var r,n,i;!function(s,o){n=[t,a(2),a(69)],r=o,void 0!==(i="function"==typeof r?r.apply(t,n):r)&&(e.exports=i)}(0,function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return"function"==typeof e.children?e.children():e.children||null}function i(e){return n(e)}function s(e){return n(e)}function o(e){var t=e.children;return null==t?null:[].concat(t).find(function(t){return t.type!==s^!e.condition})||null}Object.defineProperty(e,"__esModule",{value:!0}),e.Then=i,e.Else=s,e.If=o;var l=(r(t),r(a));i.propTypes=s.propTypes={children:l.default.oneOfType([l.default.func,l.default.string,l.default.number,l.default.object])};var c=l.default.oneOfType([l.default.object,l.default.instanceOf(i),l.default.instanceOf(s)]);o.propTypes={condition:l.default.bool.isRequired,children:l.default.oneOfType([l.default.arrayOf(c),c])},o.Then=i,o.Else=s,e.default=o})},1073:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(2),c=r(l),u=a(12),d=r(u),h=a(401);a(1355);var f=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleClick=a.handleClick.bind(a),a.handleSwitch=a.handleSwitch.bind(a),a}return s(t,e),o(t,[{key:"handleClick",value:function(){this.props.showBrandSearch?this.props.showBrandSearch():this.props.showSingleBrandSearch&&this.props.showSingleBrandSearch()}},{key:"handleSwitch",value:function(){this.props.switchChart()}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.handleMore,r=e.children,n=e.iconName,i=(e.bgColor,e.isMoreHide),s=e.isManager,o=(e.handleClick,e.cardLinkId),l=e.specialHeader,u=e.switchContent,f=(0,d.default)("iconfont",n,"hm-stack-1x","hm-color-white"),p=s?"hm-circle hm-stack-2x hm-master":"hm-circle hm-stack-2x hm-user";return c.default.createElement("div",{className:"hm-card-container"},c.default.createElement(h.Card.Child,{className:"hm-card-header"},c.default.createElement("div",{className:"hm-card-header-label"},c.default.createElement("span",{className:"hm-stack"},c.default.createElement("i",{className:p}),c.default.createElement("i",{className:f})),c.default.createElement("span",{className:"hm-card-title"},t)),i?"":c.default.createElement("div",{className:"hm-card-header-more"},u?c.default.createElement("button",{className:"switch-button",onClick:this.handleSwitch},u):c.default.createElement("a",{id:o,href:a,onClick:this.handleClick},c.default.createElement("span",{className:"special-header"},l),c.default.createElement(h.Icon,{name:"right-nav"})))),c.default.createElement("div",{className:"hm-card-body"},r))}}]),t}(c.default.Component);t.default=f,f.propTypes={title:l.PropTypes.string.isRequired,handleMore:l.PropTypes.string,tips:l.PropTypes.object,bgColor:l.PropTypes.any,iconName:l.PropTypes.string.isRequired,isMoreHide:l.PropTypes.any,handleClick:l.PropTypes.func,isManager:l.PropTypes.string,cardLinkId:l.PropTypes.string,specialHeader:l.PropTypes.string,showBrandSearch:l.PropTypes.func,showSingleBrandSearch:l.PropTypes.func,switchChart:l.PropTypes.func,switchContent:l.PropTypes.string}},1355:function(e,t){},1359:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=function(e){return e&&e.__esModule?e:{default:e}}(o);a(1361);var c=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.pager;return l.default.createElement("div",{className:"hm-pagenav-container"},l.default.createElement("div",{className:"hm-pagenav expanded"},l.default.createElement("div",{className:"pagenav-main"},l.default.createElement("span",{className:"currentPage"},e.currentPage+"/"+e.totalPage))))}}]),t}(l.default.Component);t.default=c,c.propTypes={pager:o.PropTypes.object.isRequired}},1361:function(e,t){},1424:function(e,t){},886:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){var t=e.customerMyRelations,a=t.relationsList,r=t.pager,n=t.isRelationsGet;return t?{relationsList:a,isRelationsGet:n,pager:r}:{relationsList:[],pager:{},isRelationsGet:!1}}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),c=a(2),u=r(c),d=a(402),h=a(1071),f=a(12),p=r(f),m=(a(177),a(1)),y=r(m),b=a(401),v=a(1359),g=r(v),k=a(410),P=a(946),E=r(P),C=a(1073),_=(r(C),a(403));a(1424);var w=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isPageEnd:(0,p.default)("hm-pager fixed")},a.isChecked="00",a.isSelected=1,a.currentPage=1,a.isFirstPage=!0,a.isLastPage=!1,a.checkDescribe=a.checkDescribe.bind(a),a.checkType=a.checkType.bind(a),a.loadPrevCustomers=a.loadPrevCustomers.bind(a),a.loadNextCustomers=a.loadNextCustomers.bind(a),a.handleScroll=a.handleScroll.bind(a),a}return s(t,e),l(t,[{key:"componentDidMount",value:function(){setTimeout(function(){var e=(0,_.getViewportHeight)(),t=(0,_.outerHeight)(document.querySelector(".hm-relations-container .top-tab")),a=(0,_.outerHeight)(document.querySelector(".hm-relations-container .bottom-tab")),r=(0,_.outerHeight)(document.querySelector(".tabbar"));document.querySelector(".main-container").style.height=e-t-a-r+"px",document.querySelector(".scroll-area").style.height=e-t-a-r+"px"},0);var e=this.props.dispatch,t=(0,y.default)().format("YYYY-MM-DD");e((0,k.fetchMyRelations)(this.isChecked,this.isSelected,this.currentPage,t,"")),this.scrollContainer.addEventListener("scroll",this.handleScroll)}},{key:"componentWillReceiveProps",value:function(e){var t=(e.relationsList,e.pager),a=t.currentPage,r=t.totalPage;return a<=1&&(this.isFirstPage=!0,this.isLastPage=!1),a>r&&(this.isFirstPage=!1,this.isLastPage=!0),a===r&&(r<=1?(this.isFirstPage=!0,this.isLastPage=!0):(this.isFirstPage=!1,this.isLastPage=!0)),a>1&&a<r&&(this.isFirstPage=!1,this.isLastPage=!1),!0}},{key:"componentWillUnmount",value:function(){this.scrollContainer.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){var t=this.scrollContainer.scrollTop,a=this.scrollContainer.offsetHeight;t>=this.scrollContainer.scrollHeight-a?this.setState({isPageEnd:(0,p.default)("hm-pager flowed")}):this.setState({isPageEnd:(0,p.default)("hm-pager fixed")})}},{key:"turnPage",value:function(e){var t=this.props,a=(t.relationsList,t.isRelationsGet,t.pager),r=(t.dispatch,a.currentPage),n=a.totalPage,i=1,s=void 0;return r>=n?(n<=1?(this.isFirstPage=!1,this.isLastPage=!0,s=n):(this.isFirstPage=!1,this.isLastPage=!0,s=n-1),s):r<1?(this.isFirstPage=!0,this.isLastPage=!1,1):("next"===e?i=r+1:"prev"===e&&(i=r-1),this.currentPage=i,i)}},{key:"loadNextCustomers",value:function(){var e=this.props,t=(e.relationsList,e.isRelationsGet,e.pager,e.dispatch),a=this.turnPage("next"),r=void 0,n=void 0,i=this.isSelected;1===this.isSelected?(r=(0,y.default)().format("YYYY-MM-DD"),n=""):3===this.isSelected&&(r="",n=(0,y.default)().subtract(1,"days").format("YYYY-MM-DD"),i=1),t((0,k.fetchMyRelations)(this.isChecked,i,a,r,n))}},{key:"loadPrevCustomers",value:function(){var e=this.props,t=(e.relationsList,e.isRelationsGet,e.pager,e.dispatch),a=this.turnPage("prev"),r=void 0,n=void 0,i=this.isSelected;1===this.isSelected?(r=(0,y.default)().format("YYYY-MM-DD"),n=""):3===this.isSelected&&(r="",n=(0,y.default)().subtract(1,"days").format("YYYY-MM-DD"),i=1),t((0,k.fetchMyRelations)(this.isChecked,i,a,r,n))}},{key:"checkDescribe",value:function(e){var t=this.props.dispatch;switch(e.currentTarget.getAttribute("data-top")){case"00":this.isChecked="00";break;case"01":this.isChecked="01";break;case"02":this.isChecked="02";break;case"03":this.isChecked="03";break;case"04":this.isChecked="04";break;case"05":this.isChecked="05"}var a=void 0,r=void 0,n=this.isSelected;1===this.isSelected?(a=(0,y.default)().format("YYYY-MM-DD"),r=""):3===this.isSelected&&(a="",r=(0,y.default)().subtract(1,"days").format("YYYY-MM-DD"),n=1),t((0,k.fetchMyRelations)(this.isChecked,n,1,a,r))}},{key:"checkType",value:function(e){var t=this.props.dispatch;switch(e.currentTarget.getAttribute("data-bottom")){case"1":this.isSelected=1;break;case"0":this.isSelected=0;break;case"2":this.isSelected=2;break;case"3":this.isSelected=3}var a=void 0,r=void 0,n=this.isSelected;1===this.isSelected?(a=(0,y.default)().format("YYYY-MM-DD"),r=""):3===this.isSelected&&(a="",r=(0,y.default)().subtract(1,"days").format("YYYY-MM-DD"),n=1),t((0,k.fetchMyRelations)(this.isChecked,n,1,a,r))}},{key:"render",value:function(){var e=this,t=this.props,a=t.relationsList,r=t.isRelationsGet,n=t.pager,i=void 0;return i=r?a.length>0?a.map(function(t,a){var r="00"===t.createRule||"RandomContactCustomer"===t.createRule?"":t.createRule,n="#/customer/details/"+t.taskTarget+"/"+r,i="key-"+a,s=void 0;switch(t.createRule){case"RandomContactCustomer":case"RandomChooseByNewTime":s="其他";break;case"01":s="新客转化";break;case"02":s="阶段营销";break;case"03":s="流失预警";break;case"04":s="复购推荐";break;case"05":default:s="成长关怀"}var o=(0,y.default)((0,y.default)().format("YYYY-MM-DD")).isSame(t.performDate)?"date today":"date";return u.default.createElement("li",{key:i},u.default.createElement("a",{href:n},u.default.createElement("div",{className:"name"},u.default.createElement("p",null,t.taskContent),"00"===e.isChecked&&u.default.createElement("span",{className:"task-type"},"任务类型：",s),u.default.createElement("span",{className:o},"任务日期：",t.performDate)),u.default.createElement("div",{className:"arrow"},u.default.createElement("span",{className:"icon icon-right-nav"}))))}):u.default.createElement("li",{className:"empty-customer-list"},u.default.createElement("i",{className:"iconfont icon-meiyouxiaoxi"}),u.default.createElement("span",{className:"hm-dblock"},"没有查找到合适的人...")):u.default.createElement("li",{className:"hm-loading-wrapper"},u.default.createElement("i",{className:"iconfont icon-jiazai hm-pulse hm-loading"}),u.default.createElement("span",{className:"sr-only"},"正在努力加载..")),u.default.createElement(b.View,{className:"hm-relations"},u.default.createElement(b.Container,{className:"ks-grid hm-relations-container scrollable"},r&&u.default.createElement(g.default,{pager:n}),u.default.createElement(E.default,{title:"客户跟进",history:this.props.history}),u.default.createElement("div",{className:"tab-wrapper"},u.default.createElement("div",{className:"top-tab"},u.default.createElement("button",{id:"hm_relations_all",className:"00"===this.isChecked&&"active",onClick:this.checkDescribe,"data-top":"00"},"全部"),u.default.createElement("button",{id:"hm_relations_newCustomer",className:"01"===this.isChecked&&"active",onClick:this.checkDescribe,"data-top":"01"},"新客转化"),u.default.createElement("button",{id:"hm_relations_stage",className:"02"===this.isChecked&&"active",onClick:this.checkDescribe,"data-top":"02"},"阶段营销"),u.default.createElement("button",{id:"hm_relations_lose",className:"03"===this.isChecked&&"active",onClick:this.checkDescribe,"data-top":"03"},"流失预警"),u.default.createElement("button",{id:"hm_relations_repeatBuy",className:"04"===this.isChecked&&"active",onClick:this.checkDescribe,"data-top":"04"},"复购推荐"),u.default.createElement("button",{id:"hm_relations_growth",className:"05"===this.isChecked&&"active",onClick:this.checkDescribe,"data-top":"05"},"成长关怀")),u.default.createElement("div",{className:"bottom-tab"},u.default.createElement("button",{id:"hm_relations_ready",className:1===this.isSelected&&"active",onClick:this.checkType,"data-bottom":"1"},"待跟进"),u.default.createElement("button",{id:"hm_relations_did",className:0===this.isSelected&&"active",onClick:this.checkType,"data-bottom":"0"},"已跟进"),u.default.createElement("button",{id:"hm_relations_will",className:2===this.isSelected&&"active",onClick:this.checkType,"data-bottom":"2"},"已转化"),u.default.createElement("button",{id:"hm_relations_will",className:3===this.isSelected&&"active",onClick:this.checkType,"data-bottom":"3"},"已过期"))),u.default.createElement("div",{className:"main-container"},u.default.createElement("div",{className:"main scroll-area",ref:function(t){return e.scrollContainer=t}},u.default.createElement("ul",{className:"customer-list"},i)),u.default.createElement(h.If,{condition:r&&a&&a.length>0&&n.totalPage>1},u.default.createElement("div",{className:this.state.isPageEnd},u.default.createElement(b.Button,{id:"hm_customer_list_pervious_page_button",hollow:!0,amSize:"lg",disabled:this.isFirstPage,onClick:this.loadPrevCustomers},u.default.createElement(b.Loader,{className:r?"hide":""}),u.default.createElement(b.Icon,{name:"left-nav"}),"上一页"),u.default.createElement(b.Button,{id:"hm_customer_list_next_page_button",hollow:!0,amSize:"lg",disabled:this.isLastPage,onClick:this.loadNextCustomers},u.default.createElement(b.Loader,{className:r?"hide":""}),"下一页",u.default.createElement(b.Icon,{name:"right-nav"})))))))}}]),t}(u.default.Component);w.propTypes={dispatch:c.PropTypes.func.isRequired,relationsList:c.PropTypes.array.isRequired,pager:c.PropTypes.object.isRequired,isRelationsGet:c.PropTypes.bool.isRequired,history:c.PropTypes.object.isRequired},t.default=(0,d.connect)(o)(w)},946:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=function(e){return e&&e.__esModule?e:{default:e}}(o);a(401),a(954);var c=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleBack=a.handleBack.bind(a),a.handleClick=a.handleClick.bind(a),a}return i(t,e),s(t,[{key:"handleBack",value:function(e){e.preventDefault(),this.props.history.goBack()}},{key:"handleClick",value:function(e){e.preventDefault(),this.props.openSearchInput()}},{key:"render",value:function(){var e=this.props,t=e.title,a=(e.history,e.other,e.type),r=e.mode,n=void 0;return n="normal"===a?l.default.createElement("div",{className:"normal"},t):"special"===a?l.default.createElement("div",{className:"special"},l.default.createElement("span",{id:"hm_back",href:"#/",className:"icon icon-left-nav",onClick:this.handleBack}),l.default.createElement("span",{className:"title"},t),l.default.createElement("span",{className:"other"},l.default.createElement("span",{className:"icon icon-search searchButton",onClick:this.handleClick}))):l.default.createElement("div",{className:"default"},l.default.createElement("span",{id:"hm_back",href:"#/",className:"icon icon-left-nav",onClick:this.handleBack}),l.default.createElement("span",{className:"default-title"},t)),l.default.createElement("header",{className:r?"hm-default-header manager":"hm-default-header"},n)}}]),t}(l.default.Component);t.default=c,c.propTypes={title:o.PropTypes.string.isRequired,history:o.PropTypes.object.isRequired,other:o.PropTypes.string.isRequired,type:o.PropTypes.string.isRequired,openSearchInput:o.PropTypes.func.isRequired,mode:o.PropTypes.string.isRequired}},954:function(e,t){}});