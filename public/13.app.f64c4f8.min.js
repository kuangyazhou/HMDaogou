/*! build: Fri Jan 26 2018 11:31:30 GMT+0800 (中国标准时间) */
webpackJsonp([13],{1071:function(e,t,a){var r,n,i;!function(s,o){n=[t,a(2),a(69)],r=o,void 0!==(i="function"==typeof r?r.apply(t,n):r)&&(e.exports=i)}(0,function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e){return"function"==typeof e.children?e.children():e.children||null}function i(e){return n(e)}function s(e){return n(e)}function o(e){var t=e.children;return null==t?null:[].concat(t).find(function(t){return t.type!==s^!e.condition})||null}Object.defineProperty(e,"__esModule",{value:!0}),e.Then=i,e.Else=s,e.If=o;var l=(r(t),r(a));i.propTypes=s.propTypes={children:l.default.oneOfType([l.default.func,l.default.string,l.default.number,l.default.object])};var c=l.default.oneOfType([l.default.object,l.default.instanceOf(i),l.default.instanceOf(s)]);o.propTypes={condition:l.default.bool.isRequired,children:l.default.oneOfType([l.default.arrayOf(c),c])},o.Then=i,o.Else=s,e.default=o})},1359:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=function(e){return e&&e.__esModule?e:{default:e}}(o);a(1361);var c=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return i(t,e),s(t,[{key:"render",value:function(){var e=this.props.pager;return l.default.createElement("div",{className:"hm-pagenav-container"},l.default.createElement("div",{className:"hm-pagenav expanded"},l.default.createElement("div",{className:"pagenav-main"},l.default.createElement("span",{className:"currentPage"},e.currentPage+"/"+e.totalPage))))}}]),t}(l.default.Component);t.default=c,c.propTypes={pager:o.PropTypes.object.isRequired}},1361:function(e,t){},1374:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),l=a(2),c=r(l),u=a(177),d=a(1071),p=a(12),m=r(p),f=a(401),h=a(4),y=a(403);a(1379),a(1390);var g=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.nextOrPrevPage=1,a.state={isFirstPage:!0,isLastpage:!1,isPageEnd:(0,m.default)("hm-pager fixed")},a.loadNextCustomers=a.loadNextCustomers.bind(a),a.loadPrevCustomers=a.loadPrevCustomers.bind(a),a.handleScroll=a.handleScroll.bind(a),a.handleClick=a.handleClick.bind(a),a}return s(t,e),o(t,[{key:"componentDidMount",value:function(){setTimeout(function(){var e=(0,y.getViewportHeight)(),t=(0,y.outerHeight)(document.querySelector(".hm-customerlist-header")),a=(0,y.outerHeight)(document.querySelector(".tabbar"));document.querySelector(".hm-customer-detail-list").style.height=e-t-a+"px",document.querySelector(".scroll-area").style.height=e-t-a+"px"},0),this.scrollContainer.addEventListener("scroll",this.handleScroll)}},{key:"componentWillReceiveProps",value:function(e){var t=(e.customers,e.pager);return this.props.customers,this.props.pager.currentPage,(0,h.getCustomers)(),t.currentPage<=1&&this.setState({isFirstPage:!0,isLastPage:!1}),t.currentPage>t.totalPage&&this.setState({isFirstPage:!1,isLastPage:!0}),t.currentPage===t.totalPage&&(t.totalPage<=1?this.setState({isFirstPage:!0,isLastPage:!0}):this.setState({isFirstPage:!1,isLastPage:!0})),t.currentPage>1&&t.currentPage<t.totalPage&&this.setState({isFirstPage:!1,isLastPage:!1}),(0,h.setCustomers)(e),!0}},{key:"componentWillUnmount",value:function(){this.props.resetData(),this.scrollContainer.removeEventListener("scroll",this.handleScroll)}},{key:"handleClick",value:function(e){this.props.handleShowModal()}},{key:"handleScroll",value:function(e){var t=this.scrollContainer.scrollTop,a=this.scrollContainer.offsetHeight;t>=this.scrollContainer.scrollHeight-a?this.setState({isPageEnd:(0,m.default)("hm-pager flowed")}):this.setState({isPageEnd:(0,m.default)("hm-pager fixed")})}},{key:"turnPage",value:function(e){var t=this.props.pager,a=t.totalPage,r=t.currentPage,n=1,i=void 0;return r>=a?(a<=1?(this.setState({isLastPage:!0,isFirstPage:!1}),i=a):(this.setState({isLastPage:!0,isFirstPage:!1}),i=a-1),i):r<1?(this.setState({isFirstPage:!0,isLastPage:!1}),1):("next"===e?n=r+1:"prev"===e&&(n=r-1),n)}},{key:"loadNextCustomers",value:function(){var e=this.turnPage("next");this.setState({logging:!0}),this.props.requestData.call(null,e)}},{key:"loadPrevCustomers",value:function(){var e=this.turnPage("prev");this.setState({logging:!0}),this.props.requestData.call(null,e)}},{key:"render",value:function(){var e=this,t=this.props,a=(t.pager,t.userToken,t.customers),r=t.isFetching,n=t.newTaskType,i=null;if(r)i=c.default.createElement("div",{className:"empty-customer-list"},c.default.createElement("i",{className:"iconfont icon-jiazai hm-pulse hm-loading"}),c.default.createElement("span",{className:"sr-only"},"正在努力加载.."));else if(0!==a.length||r){var s=a.map(function(t,a){if(t){var r="/customer/details/"+t.id+"/"+n,i="已绑定"===t.isBind?"item-subtitle-section bind":"item-subtitle-section notBind";return c.default.createElement("li",{className:"item item-content",key:t.id},c.default.createElement(u.Link,{id:"hm_customer_list_item_"+a,to:r,className:"item-Container customer_list_link",onClick:e.handleClick},c.default.createElement("div",{className:"item-main"},c.default.createElement("h3",{className:"item-title user-name-title"},t.realName),c.default.createElement("div",null,c.default.createElement(d.If,{condition:-1===t.noReturnVisitDays},c.default.createElement("span",{className:"visite"},"从未回访")),c.default.createElement(d.If,{condition:-1!==t.noReturnVisitDays},c.default.createElement("span",{className:"visite"},0===t.noReturnVisitDays?"已回访":"超过"+t.noReturnVisitDays+"天未回访")),t.isBind?c.default.createElement("span",{className:i},""+t.isBind,"微信"):""),c.default.createElement("div",{className:""},"最近购买时间: ",c.default.createElement("span",{className:t.lastShoppingTime?"visite":"hide"},t.lastShoppingTime.slice(0,10)),c.default.createElement("span",{className:""},"注册时间:",t.regDate)))))}return null});i=c.default.createElement("ul",{className:"list"},s)}else i=c.default.createElement("div",{className:"empty-customer-list"},c.default.createElement("i",{className:"iconfont icon-meiyouxiaoxi"}),c.default.createElement("span",{className:"hm-dblock"},"没有查找到合适的人..."));return c.default.createElement("div",{className:"hm-customer-detail-list"},c.default.createElement("div",{className:"scroll-area",ref:function(t){return e.scrollContainer=t}},i),c.default.createElement(d.If,{condition:!this.props.isFetching&&a.length>0&&this.props.pager.totalPage>1},c.default.createElement("div",{className:this.state.isPageEnd},c.default.createElement(f.Button,{id:"hm_customer_list_pervious_page_button",hollow:!0,amSize:"lg",disabled:this.state.isFirstPage,onClick:this.loadPrevCustomers},c.default.createElement(f.Loader,{className:this.props.isFetching?"":"hide"}),c.default.createElement(f.Icon,{name:"left-nav"}),"上一页"),c.default.createElement(f.Button,{id:"hm_customer_list_next_page_button",hollow:!0,amSize:"lg",disabled:this.state.isLastPage,onClick:this.loadNextCustomers},c.default.createElement(f.Loader,{className:this.props.isFetching?"":"hide"}),"下一页",c.default.createElement(f.Icon,{name:"right-nav"})))))}}]),t}(l.Component);g.propTypes={pager:l.PropTypes.object.isRequired,userToken:l.PropTypes.string.isRequired,customers:l.PropTypes.array.isRequired,requestData:l.PropTypes.func.isRequired,onPhoneCall:l.PropTypes.func.isRequired,resetData:l.PropTypes.func.isRequired,isFetching:l.PropTypes.bool.isRequired,handleShowModal:l.PropTypes.func.isRequired,newTaskType:l.PropTypes.string.isRequired},t.default=g},1379:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=function(e){return e&&e.__esModule?e:{default:e}}(o),c=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.props.firstLoading,a.ListScroll=a.ListScroll.bind(a),a}return i(t,e),s(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(e){document.body.scrollTop,document.body.offsetHeight,document.body.scrollHeight}},{key:"render",value:function(){return l.default.createElement("div",null,this.props.children)}}]),t}(o.Component);c.propTypes={firstLoading:o.PropTypes.any},t.default=c},1390:function(e,t){},1419:function(e,t){},881:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){var t=e.customersByPage;return e.filtedProductsByCID,t.customers?{pager:t.pager,list:t.customers,isFetching:t.isFetching,didInvalidate:t.didInvalidate,error:t.error||{}}:{pager:{pageSize:20,pageTotalCount:0,totalItem:0,currentPage:0},list:[],isFetching:!0,didInvalidate:!1,error:{},products:[],sort:""}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),u=a(2),d=r(u),p=a(402),m=a(404),f=a(1071),h=a(1),y=r(h),g=a(177),T=a(401),E=a(416),v=a(4),k=(a(403),a(946)),b=r(k),_=a(1374),P=r(_),R=a(1359),O=r(R);a(1419);var S=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isErrorHappend:!1,isSucceed:!1,BuyTimeOrder:"",RegTimeOrder:"",NoBuyOrder:"",show:!1,queryType:"",queryObj:"",isShowModal:!1,showOrhide:!1},a.BuyTimeOrder="",a.RegTimeOrder="",a.NoBuyOrder="",a.BindOrder="",a.RegTimeOrder="",a.containerRect=null,a.handleMoreCustomers=a.handleMoreCustomers.bind(a),a.closeNotification=a.closeNotification.bind(a),a.handleSearch=a.handleSearch.bind(a),a.handleResetCustomers=a.handleResetCustomers.bind(a),a.handleOrderFilter=a.handleOrderFilter.bind(a),a.handleFocus=a.handleFocus.bind(a),a.handleBlur=a.handleBlur.bind(a),a.handleShowModal=a.handleShowModal.bind(a),a.openSearchInput=a.openSearchInput.bind(a),a.cancleSearch=a.cancleSearch.bind(a),a}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=(e.children,this.props.params),r=a.taskType,n=a.keyword,i=a.brandId,s=(a.month,a.seriesId),o=a.catId,c=a.goodsId,u=a.compositionId,d=a.contactType,p=JSON.parse(sessionStorage.getItem("checkedOrderType")),f=(0,v.getKeyWords)();this.queryStr.value=f||"";var h=void 0,g=void 0,T=void 0;if(null!==(0,v.getCustomers)()&&(h=(0,v.getCustomers)().pager.currentPage),null!==p)switch(g=p.orderName,T=p.orderType,g){case"BuyTimeOrder":this.BuyTimeOrder=T,this.BindOrder="",this.RegTimeOrder="";break;case"BindOrder":this.BuyTimeOrder="",this.BindOrder=T,this.RegTimeOrder="";break;case"RegTimeOrder":this.BuyTimeOrder="",this.BindOrder="",this.RegTimeOrder=T}var k=(0,v.getFilterConditions)();if(this.queryObj=k,"RegTimeDesc"===this.props.params.newCustomer)return T="RegTimeDesc",this.RegTimeOrder="RegTimeDesc",void t((0,E.fetchCustomers)(l({},E.DEFAULT_QUERY_PARAM,{regStartTime:(0,y.default)().startOf("month").format("YYYY-MM-DD"),sort:"RegTimeDesc"})));if(this.containerRect=this.header.getBoundingClientRect(),(0,m.isEmpty)(r)&&(0,m.isEmpty)(n)&&(0,m.isEmpty)(k)&&(0,m.isEmpty)(i)&&(0,m.isEmpty)(p)&&(0,m.isEmpty)(s)&&(0,m.isEmpty)(o)&&(0,m.isEmpty)(c)&&(0,m.isEmpty)(u)&&(0,m.isEmpty)(f)&&(0,m.isEmpty)(this.props.params.newCustomer)&&(0,m.isEmpty)(d))t((0,E.fetchTopCustomers)(E.DEFAULT_QUERY_PARAM));else{var b=void 0;b=i?l({},E.DEFAULT_QUERY_PARAM,k,{pageSize:15,currentPage:h,sort:T,taskType:r,brandId:i,taskTarget:n,keywords:f,contactType:d}):s?l({},E.DEFAULT_QUERY_PARAM,k,{pageSize:15,currentPage:h,sort:T,taskType:r,seriesId:s,taskTarget:n,keywords:f,contactType:d}):o?l({},E.DEFAULT_QUERY_PARAM,k,{pageSize:15,currentPage:h,sort:T,taskType:r,catId:o,taskTarget:n,keywords:f,contactType:d}):c?l({},E.DEFAULT_QUERY_PARAM,k,{pageSize:15,currentPage:h,sort:T,taskType:r,goodsId:c,taskTarget:n,keywords:f,contactType:d}):u?l({},E.DEFAULT_QUERY_PARAM,k,{pageSize:15,currentPage:h,sort:T,taskType:r,compositionId:u,taskTarget:n,keywords:f,contactType:d}):l({},E.DEFAULT_QUERY_PARAM,k,{pageSize:15,currentPage:h,sort:T,taskType:r,taskTarget:n,keywords:f,contactType:d}),t((0,E.fetchCustomers)(b))}}},{key:"componentWillReceiveProps",value:function(e){return this.setState({show:!1}),(0,m.isEmpty)(e.error)||this.Modal.setState({isErrorHappend:!0}),!1}},{key:"handleShowModal",value:function(){this.setState({isShowModal:!0})}},{key:"handleMoreCustomers",value:function(e){var t=this.props.params,a=t.taskType,r=t.keyword,n=t.brandId,i=(t.month,t.seriesId),s=t.catId,o=t.goodsId,c=t.compositionId,u=t.contactType,d=t.newCustomer,p=JSON.parse(sessionStorage.getItem("checkedOrderType")),m=(0,v.getFilterConditions)(),f=(0,v.getKeyWords)(),h=void 0,g=void 0,T=this.props.dispatch;e&&(null!==p?(h=p.orderType,g=n?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:h,taskType:a,brandId:n,taskTarget:r,keywords:f,contactType:u}):i?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:h,taskType:a,seriesId:i,taskTarget:r,keywords:f,contactType:u}):s?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:h,taskType:a,catId:s,taskTarget:r,keywords:f,contactType:u}):o?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:h,taskType:a,goodsId:o,taskTarget:r,keywords:f,contactType:u}):c?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:h,taskType:a,compositionId:c,taskTarget:r,keywords:f,contactType:u}):d?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:"RegTimeDesc",regStartTime:(0,y.default)().startOf("month").format("YYYY-MM-DD"),taskType:a,goodsId:o,taskTarget:r,keywords:f,contactType:u}):l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:h,taskType:a,taskTarget:r,keywords:f,contactType:u})):null===p&&(g=n?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:this.queryType,taskType:a,brandId:n,taskTarget:r,keywords:f,contactType:u}):i?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:this.queryType,taskType:a,seriesId:i,taskTarget:r,keywords:f,contactType:u}):s?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:this.queryType,taskType:a,catId:s,taskTarget:r,keywords:f,contactType:u}):o?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:this.queryType,taskType:a,goodsId:o,taskTarget:r,keywords:f,contactType:u}):c?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:this.queryType,taskType:a,compositionId:c,taskTarget:r,keywords:f,contactType:u}):d?l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:"RegTimeDesc",regStartTime:(0,y.default)().startOf("month").format("YYYY-MM-DD"),taskType:a,goodsId:o,taskTarget:r,keywords:f,contactType:u}):l({},E.DEFAULT_QUERY_PARAM,m,this.queryObj,{pageSize:15,currentPage:e,sort:this.queryType,taskType:a,taskTarget:r,keywords:f,contactType:u})),T((0,E.fetchCustomers)(g)))}},{key:"handleResetCustomers",value:function(){(0,this.props.dispatch)((0,E.resetCustomers)())}},{key:"handleOrderFilter",value:function(e){e.preventDefault();var t=this,a=this.props.dispatch,r=this.props.params,n=r.taskType,i=r.keyword,s=r.brandId,o=(r.month,r.seriesId),c=r.catId,u=r.goodsId,d=r.compositionId,p=r.contactType,m=e.currentTarget.querySelector(".text"),f=m.getAttribute("data-order-name")+"Order",h=m.getAttribute("data-order"),y=function(e,t){return h?h===t+"Asc"?t+"Desc":h===t+"Desc"?t+"Asc":"":t+"Asc"};switch(f){case"BuyTimeOrder":h=y(0,"BuyTime"),this.BuyTimeOrder=h,this.BindOrder="",this.RegTimeOrder="";break;case"BindOrder":h=y(0,"Bind"),this.BuyTimeOrder="",this.BindOrder=h,this.RegTimeOrder="";break;case"RegTimeOrder":h=y(0,"RegTime"),this.BuyTimeOrder="",this.BindOrder="",this.RegTimeOrder=h}this.queryType=h;var g={orderName:f,orderType:h};sessionStorage.setItem("checkedOrderType",JSON.stringify(g));var T=(0,v.getFilterConditions)(),k=(0,v.getKeyWords)();setTimeout(function(){var e=void 0;null!==T?e=s?l({},{sort:h},E.DEFAULT_QUERY_PARAM,T,{taskType:n,taskTarget:i,brandId:s,keywords:k,contactType:p}):o?l({},{sort:h},E.DEFAULT_QUERY_PARAM,T,{taskType:n,taskTarget:i,seriesId:o,keywords:k,contactType:p}):c?l({},{sort:h},E.DEFAULT_QUERY_PARAM,T,{taskType:n,taskTarget:i,catId:c,keywords:k,contactType:p}):u?l({},{sort:h},E.DEFAULT_QUERY_PARAM,T,{taskType:n,taskTarget:i,goodsId:u,keywords:k,contactType:p}):d?l({},{sort:h},E.DEFAULT_QUERY_PARAM,T,{taskType:n,taskTarget:i,compositionId:d,keywords:k,contactType:p}):l({},{sort:h},E.DEFAULT_QUERY_PARAM,T,{taskType:n,taskTarget:i,keywords:k,contactType:p}):null===T&&(e=s?l({},{sort:h},E.DEFAULT_QUERY_PARAM,{taskType:n,taskTarget:i,brandId:s,keywords:k,contactType:p}):o?l({},{sort:h},E.DEFAULT_QUERY_PARAM,{taskType:n,taskTarget:i,seriesId:o,keywords:k,contactType:p}):c?l({},{sort:h},E.DEFAULT_QUERY_PARAM,{taskType:n,taskTarget:i,catId:c,keywords:k,contactType:p}):u?l({},{sort:h},E.DEFAULT_QUERY_PARAM,{taskType:n,taskTarget:i,goodsId:u,keywords:k,contactType:p}):d?l({},{sort:h},E.DEFAULT_QUERY_PARAM,{taskType:n,taskTarget:i,compositionId:d,keywords:k,contactType:p}):l({},{sort:h},E.DEFAULT_QUERY_PARAM,{taskType:n,taskTarget:i,keywords:k,contactType:p})),t.nextOrPrevPage=0,a((0,E.fetchCustomers)(e))},300)}},{key:"handleFocus",value:function(){this.props.dispatch,this.setState({show:!0})}},{key:"handleBlur",value:function(){var e=this;setTimeout(function(){e.setState({show:!1})},0)}},{key:"openSearchInput",value:function(){var e=this;this.setState({showOrhide:!this.state.showOrhide}),setTimeout(function(){e.queryStr.focus()},0)}},{key:"cancleSearch",value:function(){this.openSearchInput(),this.queryStr.blur()}},{key:"handleSearch",value:function(e){e.preventDefault();var t=this.props.dispatch;if(this.queryStr&&""!==this.queryStr.value){var a=l({},E.DEFAULT_QUERY_PARAM,{keywords:this.queryStr.value});this.nextOrPrevPage=0,t((0,E.fetchCustomers)(a)),(0,v.setKeyWords)(this.queryStr.value),this.allCustomers=[]}}},{key:"closeNotification",value:function(e){e.preventDefault(),this.setState({isErrorHappend:!1,isSucceed:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.error,t.list),r=t.pager,n=(t.hotMemberLabelList,t.params),i=(0,v.getToken)(),s=sessionStorage.getItem("activeList"),o=sessionStorage.getItem("shoppingTime"),l=void 0;(0,v.getFilterConditions)()&&(""===(0,v.getFilterConditions)().shoppingDateStart&&""===(0,v.getFilterConditions)().shoppingDateEnd&&""===(0,v.getFilterConditions)().brandId&&""===(0,v.getFilterConditions)().goodsSn||(l=(0,v.getFilterConditions)()));var c=void 0;return c=s||o||l?"hm-filter-item small choose":"hm-filter-item small",d.default.createElement(T.View,null,d.default.createElement(T.Notification,{title:"请稍后再来!",amStyle:"alert",visible:this.state.isErrorHappend,animated:!0,onDismiss:this.closeNotification},"服务器正在卖力处理中"),d.default.createElement(T.Notification,{title:"成功了!",amStyle:"success",visible:this.state.isSucceed,animated:!0,onDismiss:this.closeNotification},"电话拨打记录已经被保存."),d.default.createElement(f.If,{condition:!this.props.isFetching},d.default.createElement(O.default,{pager:r})),this.state.isShowModal&&d.default.createElement("div",{className:"loading-modal"},d.default.createElement("i",{className:"iconfont icon-jiazai hm-pulse hm-loading"})),!this.state.showOrhide&&d.default.createElement(b.default,{title:"客户列表",history:this.props.history,type:"special",openSearchInput:this.openSearchInput}),d.default.createElement("div",{className:"hm-customerlist-header",ref:function(t){e.header=t}},d.default.createElement("form",{action:"post",onSubmit:this.handleSearch},d.default.createElement(T.Grid,{className:this.state.showOrhide?"show":"hide"},d.default.createElement(T.Col,{cols:5,className:"search"},d.default.createElement("input",{id:"hm_list_search",type:"text",name:"q",ref:function(t){e.queryStr=t},required:!0,placeholder:"可输入姓名、手机号、线下会员卡号"}),d.default.createElement("span",{id:"hm_list_search_icon",className:"icon icon-search",onClick:this.handleSearch})),d.default.createElement(T.Col,{cols:1},d.default.createElement("span",{className:"cancle",onClick:this.cancleSearch},"取消")))),d.default.createElement("div",{className:"tips-filter"},d.default.createElement("a",{id:"hm_filter_buy_time_button",className:"hm-filter-item middle",onClick:this.handleOrderFilter},d.default.createElement(f.If,{condition:""===this.BuyTimeOrder},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text","data-order-name":"BuyTime","data-order":""},"购买时间"),d.default.createElement("i",{className:"iconfont icon-shangxiajiantou"}))),d.default.createElement(f.If,{condition:"BuyTimeAsc"===this.BuyTimeOrder},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text active","data-order-name":"BuyTime","data-order":"BuyTimeAsc"},"购买时间"),d.default.createElement("i",{className:"iconfont icon-shixinjiantoushang active"}))),d.default.createElement(f.If,{condition:"BuyTimeDesc"===this.BuyTimeOrder},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text active","data-order-name":"BuyTime","data-order":"BuyTimeDesc"},"购买时间"),d.default.createElement("i",{className:"iconfont icon-shixinjiantouxia active"})))),d.default.createElement("a",{id:"hm_filter_bind_button",className:"hm-filter-item middle",onClick:this.handleOrderFilter},d.default.createElement(f.If,{condition:""===this.BindOrder},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text","data-order-name":"Bind","data-order":""},"绑定客户"),d.default.createElement("i",{className:"iconfont icon-shangxiajiantou"}))),d.default.createElement(f.If,{condition:"BindAsc"===this.BindOrder},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text active","data-order-name":"Bind","data-order":"BindAsc"},"绑定客户"),d.default.createElement("i",{className:"iconfont icon-shixinjiantoushang active"}))),d.default.createElement(f.If,{condition:"BindDesc"===this.BindOrder},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text active","data-order-name":"Bind","data-order":"BindDesc"},"绑定客户"),d.default.createElement("i",{className:"iconfont icon-shixinjiantouxia active"})))),d.default.createElement("a",{id:"hm_filter_reg_time_button",className:"hm-filter-item middle",onClick:this.handleOrderFilter},d.default.createElement(f.If,{condition:""===this.RegTimeOrder},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text","data-order-name":"RegTime","data-order":""},"注册时间"),d.default.createElement("i",{className:"iconfont icon-shangxiajiantou"}))),d.default.createElement(f.If,{condition:"RegTimeAsc"===this.RegTimeOrder},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text active","data-order-name":"RegTime","data-order":"RegTimeAsc"},"注册时间"),d.default.createElement("i",{className:"iconfont icon-shixinjiantoushang active"}))),d.default.createElement(f.If,{condition:"RegTimeDesc"===this.RegTimeOrder},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text active","data-order-name":"RegTime","data-order":"RegTimeDesc"},"注册时间"),d.default.createElement("i",{className:"iconfont icon-shixinjiantouxia active"})))),d.default.createElement(g.Link,{id:"hm_filter_button",to:"/customer/filter",className:c,state:{prevPath:this.props.location.pathname}},d.default.createElement("div",{className:"hm-filter-item-inner"},d.default.createElement("span",{className:"text"},"筛选"),d.default.createElement("i",{className:"iconfont icon-shaixuanxuanzhong"}))))),d.default.createElement(T.Container,{scrollable:!0,className:"ks-grid"},d.default.createElement(P.default,{pager:r,userToken:i,customers:a,isFetching:this.props.isFetching,onPhoneCall:this.handlePhoneCall,requestData:this.handleMoreCustomers,resetData:this.handleResetCustomers,handleShowModal:this.handleShowModal,newTaskType:n.taskType})))}}]),t}(d.default.Component);S.propTypes={dispatch:u.PropTypes.func.isRequired,pager:u.PropTypes.object.isRequired,list:u.PropTypes.array.isRequired,error:u.PropTypes.object.isRequired,isFetching:u.PropTypes.bool.isRequired,hotMemberLabelList:u.PropTypes.array,location:d.default.PropTypes.object.isRequired,history:u.PropTypes.object.isRequired},t.default=(0,p.connect)(o)(S)},946:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(2),l=function(e){return e&&e.__esModule?e:{default:e}}(o);a(401),a(954);var c=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a.handleBack=a.handleBack.bind(a),a.handleClick=a.handleClick.bind(a),a}return i(t,e),s(t,[{key:"handleBack",value:function(e){e.preventDefault(),this.props.history.goBack()}},{key:"handleClick",value:function(e){e.preventDefault(),this.props.openSearchInput()}},{key:"render",value:function(){var e=this.props,t=e.title,a=(e.history,e.other,e.type),r=e.mode,n=void 0;return n="normal"===a?l.default.createElement("div",{className:"normal"},t):"special"===a?l.default.createElement("div",{className:"special"},l.default.createElement("span",{id:"hm_back",href:"#/",className:"icon icon-left-nav",onClick:this.handleBack}),l.default.createElement("span",{className:"title"},t),l.default.createElement("span",{className:"other"},l.default.createElement("span",{className:"icon icon-search searchButton",onClick:this.handleClick}))):l.default.createElement("div",{className:"default"},l.default.createElement("span",{id:"hm_back",href:"#/",className:"icon icon-left-nav",onClick:this.handleBack}),l.default.createElement("span",{className:"default-title"},t)),l.default.createElement("header",{className:r?"hm-default-header manager":"hm-default-header"},n)}}]),t}(l.default.Component);t.default=c,c.propTypes={title:o.PropTypes.string.isRequired,history:o.PropTypes.object.isRequired,other:o.PropTypes.string.isRequired,type:o.PropTypes.string.isRequired,openSearchInput:o.PropTypes.func.isRequired,mode:o.PropTypes.string.isRequired}},954:function(e,t){}});