/*! build: Fri Jan 26 2018 11:31:30 GMT+0800 (中国标准时间) */
webpackJsonp([24],{1372:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),u=a(2),l=i(u),c=a(37),d=(i(c),a(404)),f=a(401),p=(a(403),a(4));a(1389);var h=a(1373),m=i(h),v=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={isErrorHappend:!1,isPlaceHolderVisible:"hm-commbox-placeholder opacity-off",isTxtFocus:"no-focus",isDropdownVisible:"hm-commbox-list hide",productQueryStr:"",newParentList:"",menus:m.default},a.clonedMenus=(0,d.cloneDeep)(m.default),a.reset=a.reset.bind(a),a.onDismiss=a.onDismiss.bind(a),a.handleClick=a.handleClick.bind(a),a.handleInputEvt=a.handleInputEvt.bind(a),a.handleProductSelected=a.handleProductSelected.bind(a),a}return s(t,e),o(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(sessionStorage.getItem("shoppingTime"));null!=e&&(this.shoppingDateStart.refs.field.value=e.shoppingDateStart,this.shoppingDateEnd.refs.field.value=e.shoppingDateEnd)}},{key:"onDismiss",value:function(e){function t(e,t,a){e.forEach(function(e){"active"===e.active&&(t[a]=e.featureCode)})}var a={};if("hm-commbox-list"===this.state.isDropdownVisible)return this.productRef.value="",void this.setState({isDropdownVisible:"hm-commbox-list hide"});a.shoppingDateStart=this.shoppingDateStart.getValue(),a.shoppingDateEnd=this.shoppingDateEnd.getValue(),a.brandId=this.productRef.getAttribute("data-val")?this.productRef.getAttribute("data-val"):"",a.goodsSn=this.goodsSn.value,this.newParentList.forEach(function(e){switch(e.featureName){case"宝宝性别":t(e.childrenList,a,"f01");break;case"宝宝年龄段":t(e.childrenList,a,"f02");break;case"消费能力":t(e.childrenList,a,"f03");break;case"孕期":t(e.childrenList,a,"f04");break;case"客户活跃度":t(e.childrenList,a,"f05");break;case"流失客户":t(e.childrenList,a,"f06");break;case"商城会员筛选":t(e.childrenList,a,"isMemberOnline")}}),this.props.onSubmit.call(null,a);var i={shoppingDateStart:a.shoppingDateStart,shoppingDateEnd:a.shoppingDateEnd};""===i.shoppingDateStart&&""===i.shoppingDateEnd||sessionStorage.setItem("shoppingTime",JSON.stringify(i))}},{key:"handleProductSelected",value:function(e){e.preventDefault();var t=e.currentTarget.getAttribute("data-product-id"),a=e.target.textContent;this.productRef.setAttribute("data-val",t),this.productRef.value=a,this.close()}},{key:"handleInputEvt",value:function(e){switch(e.type){case"focus":this.setState({isTxtFocus:"is-focus"});break;case"change":var t=e.target.value;""!==t?this.setState({isPlaceHolderVisible:"hm-commbox-placeholder opacity-on",isDropdownVisible:"hm-commbox-list",productQueryStr:t}):this.setState({isPlaceHolderVisible:"hm-commbox-placeholder opacity-off",isDropdownVisible:"hm-commbox-list hide",productQueryStr:""});break;case"blur":this.setState({isTxtFocus:"is-focus hide"})}}},{key:"handleClick",value:function(e){e.preventDefault();var t=e.currentTarget,a=t.getAttribute("data-section"),i=t.getAttribute("data-value"),r=t.className;this.newParentList.forEach(function(e,t){e.featureName===a&&e.childrenList.forEach(function(e){e.featureCode===i&&"active"!==e.active?e.active="active":("active"===e.active&&r.indexOf("active"),e.active="")})}),this.setState({newParentList:this.newParentList}),sessionStorage.setItem("activeList",JSON.stringify(this.newParentList))}},{key:"close",value:function(){this.setState({isDropdownVisible:"hm-commbox-list hide"})}},{key:"reset",value:function(e){var t=this,a=this.props,i=a.features,r=a.isFeaturesGet,n=[];if(this.newParentList=[],r){i.forEach(function(e,a){"0"===e.featureType?t.newParentList.push(e):"1"===e.featureType&&n.push(e)});for(var s=0;s<this.newParentList.length;s++)!function(e){t.newParentList[e].childrenList=[],n.forEach(function(a,i){t.newParentList[e].featureCode===a.featureCode.slice(0,3)&&t.newParentList[e].childrenList.push(a)})}(s)}this.shoppingDateStart.refs.field.value="",this.shoppingDateEnd.refs.field.value="",this.productRef.value="",this.goodsSn.value="",this.clonedMenus=(0,d.cloneDeep)(m.default),this.newParentList.forEach(function(e,t){e.childrenList.forEach(function(e){e.active=""})}),this.setState({newParentList:this.newParentList}),sessionStorage.removeItem("activeList"),sessionStorage.removeItem("shoppingTime"),(0,p.removeFilterConditions)(),(0,p.removeKeyWords)()}},{key:"render",value:function(){var e=this,t=null,a=null,i=this.props,r=i.features,n=i.isFeaturesGet,s=[];if(this.newParentList=[],n){r.forEach(function(t,a){"0"===t.featureType?e.newParentList.push(t):"1"===t.featureType&&s.push(t)});for(var o=0;o<this.newParentList.length;o++)!function(t){e.newParentList[t].childrenList=[],s.forEach(function(a,i){e.newParentList[t].featureCode===a.featureCode.slice(0,3)&&e.newParentList[t].childrenList.push(a)})}(o);var u=JSON.parse(sessionStorage.getItem("activeList"));null!==u&&(this.newParentList=u),this.newParentList&&this.newParentList.length>0&&(a=this.newParentList.map(function(t,a){var i="idx-"+a;return l.default.createElement(f.Group,{header:t.featureName,key:i,noPadded:!1,className:"hm-customer-filter-container"},l.default.createElement(f.Grid,{className:"hm-customer-filter-items",avg:3},t.childrenList.map(function(a,i){var r=a.featureName,n="newidx-"+i;return l.default.createElement(f.Col,{className:"item",key:n},l.default.createElement("a",{id:"hm_customer_filter_label_"+a.featureCode,onClick:e.handleClick,className:a.active,"data-value":a.featureCode,"data-section":t.featureName},l.default.createElement("span",{"data-value":a.featureCode,"data-section":t.featureName},r)))})))}))}else a=l.default.createElement("div",{className:"hm-loading-wrapper"},l.default.createElement("i",{className:"iconfont icon-jiazai hm-pulse hm-loading"}));return l.default.createElement("div",null,l.default.createElement("div",{className:"hm-customer-filter"},a,this.state.menus.map(function(a,i){var r="filter-"+i;switch(a.title){case"购买时间筛选":t=l.default.createElement("div",null,l.default.createElement(f.Field,{id:"hm_customer_filter_start_time",type:"date",name:"shoppingDateStart",label:"开始时间：",className:"shoppingDateStart",ref:function(t){return e.shoppingDateStart=t}}),l.default.createElement(f.Field,{id:"hm_customer_filter_end_time",type:"date",name:"shoppingDateEnd",label:"结束时间：",className:"shoppingDateEnd",ref:function(t){return e.shoppingDateEnd=t}}));break;case"品牌筛选":var n=e.props.products.map(function(t,a){var i="product-"+a;return""!==e.state.productQueryStr&&(0,d.includes)(t.brandName,e.state.productQueryStr)?l.default.createElement("li",{key:i},l.default.createElement("a",{id:"hm_customer_filter_brand_filter_input",onClick:e.handleProductSelected,"data-product-id":t.brandId},l.default.createElement("h3",{className:"item-title"},t.brandName))):""});t=l.default.createElement("div",{className:"hm-commbox"},l.default.createElement("div",{className:"hm-commbox-inner"},l.default.createElement("input",{id:"hm_customer_filter_brand_search_input",type:"text",autoComplete:"off",onFocus:e.handleInputEvt,onBlur:e.handleInputEvt,onChange:e.handleInputEvt,placeholder:"请输入品牌名称",ref:function(t){e.productRef=t}}),l.default.createElement("ul",{className:e.state.isDropdownVisible},n)));break;case"商品筛选":t=l.default.createElement("input",{id:"hm_customer_filter_product_filter_input",type:"text",name:"goodsSn",placeholder:"请输入商品货号",ref:function(t){return e.goodsSn=t}})}return l.default.createElement(f.Group,{header:a.title,noPadded:!1,key:r,className:"hm-customer-filter-container"},t)})),l.default.createElement("div",{className:"hm-customer-filter-btn-group"},l.default.createElement(f.ButtonGroup,{justify:!0},l.default.createElement(f.Button,{id:"hm_customer_filter_reset",onClick:this.reset},"重置"),l.default.createElement(f.Button,{id:"hm_customer_filter_sure",amStyle:"alert",onClick:this.onDismiss},"确定"))))}}]),t}(l.default.Component);t.default=v,v.propTypes={onSubmit:u.PropTypes.func.isRequired,products:u.PropTypes.array.isRequired,features:u.PropTypes.array.isRequired,isFeaturesGet:u.PropTypes.bool.isRequired}},1373:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{title:"",items:[{text:"保密",value:"F0101",active:""},{text:"男",value:"F0102",active:""},{text:"女",value:"F0103",active:""}]},{title:"",items:[{text:"0~3个月",value:"F0201",active:""},{text:"6~12个月",value:"F0202",active:""},{text:"1~2岁",value:"F0203",active:""},{text:"2~3岁",value:"F0204",active:""},{text:"3~4岁",value:"F0205",active:""},{text:"4~5岁",value:"F0206",active:""},{text:"5~6岁",value:"F0207",active:""},{text:"6岁以上",value:"F0208",active:""}]},{title:"",items:[{text:"低消费能力",value:"F0301",active:""},{text:"中消费能力",value:"F0302",active:""},{text:"高消费能力",value:"F0303",active:""}]},{title:"",items:[{text:"孕前期",value:"F0401",active:""},{text:"孕中期",value:"F0402",active:""},{text:"孕晚期",value:"F0403",active:""}]},{title:"",items:[{text:"活跃客户",value:"F0501",active:""},{text:"冷冻客户",value:"F0502",active:""}]},{title:"",items:[{text:"没有",value:"F0601",active:""},{text:"已流失",value:"F0602",active:""}]},{title:"购买时间筛选",items:[]},{title:"品牌筛选",items:[]},{title:"商品筛选",items:[]}]},1389:function(e,t){},1418:function(e,t){},880:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){var t=e.filtedProductsByCID;return{products:t.products||[],features:t.features||[],isFeaturesGet:t.isFeaturesGet||!1}}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=a(2),c=i(l),d=a(402),f=a(401),p=(a(404),a(4)),h=a(418),m=a(1372),v=i(m);a(1418);var b=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.pathName="",a.handleFilter=a.handleFilter.bind(a),a}return s(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch;e.history,e.location,t((0,h.getProductsById)()),t((0,h.getCustomerFeature)())}},{key:"componentWillReceiveProps",value:function(e){this.pathName=e.location.state.prevPath}},{key:"handleFilter",value:function(e){var t=this.props.history;""===e.shoppingDateStart&&""===e.shoppingDateEnd&&""===e.brandId&&""===e.goodsSn&&""===e.f01&&""===e.f02&&""===e.f03&&""===e.f04&&""===e.f05&&""===e.f06||(0,p.addFilterConditions)(e),t.push(this.pathName)}},{key:"render",value:function(){return c.default.createElement(f.View,null,c.default.createElement(f.Container,{scrollable:!0,className:"ks-grid hm-customer-filter-container"},c.default.createElement("div",{className:"hm-customer-filter-inner"},c.default.createElement(v.default,{products:this.props.products,onSubmit:this.handleFilter,features:this.props.features,isFeaturesGet:this.props.isFeaturesGet}))))}}]),t}(c.default.Component);b.propTypes={dispatch:l.PropTypes.func.isRequired,products:l.PropTypes.array.isRequired,features:l.PropTypes.array.isRequired,history:l.PropTypes.object.isRequired,isFeaturesGet:l.PropTypes.bool.isRequired,location:c.default.PropTypes.object.isRequired},t.default=(0,d.connect)(o)(b)}});